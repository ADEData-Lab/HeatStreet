# Heat Street EPC Analysis Configuration

# Project Settings
project:
  name: "Heat Street EPC London Analysis"
  version: "1.0.0"
  author: "Heat Street Project Team"

# Geographic Scope
geography:
  region: "London"
  boroughs:
    - "Barking and Dagenham"
    - "Barnet"
    - "Bexley"
    - "Brent"
    - "Bromley"
    - "Camden"
    - "City of London"
    - "Croydon"
    - "Ealing"
    - "Enfield"
    - "Greenwich"
    - "Hackney"
    - "Hammersmith and Fulham"
    - "Haringey"
    - "Harrow"
    - "Havering"
    - "Hillingdon"
    - "Hounslow"
    - "Islington"
    - "Kensington and Chelsea"
    - "Kingston upon Thames"
    - "Lambeth"
    - "Lewisham"
    - "Merton"
    - "Newham"
    - "Redbridge"
    - "Richmond upon Thames"
    - "Southwark"
    - "Sutton"
    - "Tower Hamlets"
    - "Waltham Forest"
    - "Wandsworth"
    - "Westminster"

# Property Filters
property_filters:
  construction_period:
    start_year: null  # Any pre-1930
    end_year: 1930
  property_types:
    - "Mid-terrace"
    - "End-terrace"
    - "Terraced"
  exclude_conversions: true
  certificate_recency_years: 10

# Data Quality Thresholds
data_quality:
  min_floor_area: 25  # m²
  max_floor_area: 400  # m²
  required_fields:
    - "address"
    - "postcode"
    - "property_type"
    - "built_form"
    - "construction_age_band"
    - "current_energy_rating"
    - "walls_description"
    - "heating_system"

# Analysis Parameters
analysis:
  case_street: "Shakespeare Crescent"
  epc_bands: ["A", "B", "C", "D", "E", "F", "G"]

  # Heat Network Zone Tiers
  heat_network_tiers:
    tier_1:
      name: "Adjacent to existing network"
      distance_meters: 250
    tier_2:
      name: "Within planned HNZ"
      criteria: "inside_hnz_boundary"
    tier_3:
      name: "High heat density"
      threshold_kwh_per_m: 3000
    tier_4:
      name: "Moderate heat density"
      threshold_kwh_per_m: 1500
    tier_5:
      name: "Low heat density"
      threshold_kwh_per_m: 0

# Scenario Modeling
scenarios:
  baseline:
    name: "No intervention"
    measures: []

  fabric_only:
    name: "Fabric improvements only"
    measures:
      - "loft_insulation_topup"
      - "wall_insulation"
      - "double_glazing"

  heat_pump:
    name: "Heat pump pathway"
    measures:
      - "loft_insulation_topup"
      - "wall_insulation"
      - "double_glazing"
      - "ashp_installation"
      - "emitter_upgrades"

  heat_network:
    name: "Heat network pathway"
    measures:
      - "modest_fabric_improvements"
      - "district_heating_connection"

  hybrid:
    name: "Hybrid pathway"
    measures:
      - "fabric_improvements"
      - "heat_network_where_available"
      - "ashp_elsewhere"

# Cost Assumptions (£)
costs:
  # Fabric measures
  loft_insulation_per_m2: 30
  loft_insulation_topup: 1200  # 100mm -> 270mm fixed cost
  cavity_wall_insulation: 2500
  internal_wall_insulation_per_m2: 100
  external_wall_insulation_per_m2: 150
  solid_wall_insulation_ewi: 10000  # External wall insulation (typical)
  solid_wall_insulation_iwi: 14000  # Internal wall insulation (conservation areas)
  floor_insulation: 1500  # Suspended timber floor insulation
  draught_proofing: 500  # Doors and windows draught strips

  # Glazing measures
  double_glazing_per_m2: 400
  double_glazing_upgrade: 6000  # Single -> double, typical property
  triple_glazing_per_m2: 600
  triple_glazing_upgrade: 9000  # Double -> triple (Danish standard)

  # Heat technology
  ashp_installation: 12000
  hybrid_heat_pump: 8000  # Keeps gas boiler for peaks

  # Emitter and distribution
  emitter_upgrade_per_radiator: 300
  radiator_upsizing: 2500  # Full property radiator upsizing for low-temp HP
  hot_water_cylinder: 1200  # 200L cylinder + installation

  # Heat network
  district_heating_connection: 5000

  # Electrical
  electrical_upgrade: 1500  # 60A -> 100A supply for HP

# Measure Savings (kWh/year per typical property or % reduction)
measure_savings:
  # Note: These are typical annual kWh savings or % heat loss reductions
  loft_insulation_topup:
    kwh_saving_pct: 0.15  # 15% of heating demand
    flow_temp_reduction_k: 2  # 2°C lower flow temp achievable
  wall_insulation:
    cavity_kwh_saving_pct: 0.20  # 20% of heating demand
    solid_kwh_saving_pct: 0.30  # 30% of heating demand
    flow_temp_reduction_k: 5  # 5°C lower flow temp achievable
  floor_insulation:
    kwh_saving_pct: 0.05  # 5% of heating demand
    flow_temp_reduction_k: 1
  double_glazing:
    kwh_saving_pct: 0.10  # 10% of heating demand
    flow_temp_reduction_k: 2
  triple_glazing:
    kwh_saving_pct: 0.15  # 15% of heating demand (vs single)
    flow_temp_reduction_k: 3
  draught_proofing:
    kwh_saving_pct: 0.05
    flow_temp_reduction_k: 1
  radiator_upsizing:
    kwh_saving_pct: 0.0  # No direct saving, enables lower flow temp
    flow_temp_reduction_k: 10  # Enables 10°C lower flow temp

# Subsidy Levels for Sensitivity Analysis (%)
subsidy_levels: [0, 25, 50, 75, 100]

# Energy Prices (£/kWh)
# UPDATED 2025-12-04: Aligned with Ofgem Energy Price Cap Q4 2024
# Source: https://www.ofgem.gov.uk/energy-price-cap
# Note: These are unit rates only (excluding standing charges)
energy_prices:
  current:
    gas: 0.0624  # Updated from 0.10 - Ofgem cap Q4 2024: 6.24p/kWh
    electricity: 0.245  # Updated from 0.34 - Ofgem cap Q4 2024: 24.5p/kWh
  projected_2030:
    gas: 0.07  # Modest increase from current (carbon pricing, reduced demand)
    electricity: 0.22  # Decrease due to renewables expansion
  projected_2040:
    gas: 0.08  # Further modest increase
    electricity: 0.18  # Significant decrease (high renewable penetration)

# Carbon Factors (kgCO2/kWh)
# UPDATED 2025-12-04: Aligned with DESNZ Greenhouse Gas Reporting Conversion Factors 2024
# Source: https://www.gov.uk/government/publications/greenhouse-gas-reporting-conversion-factors-2024
# Grid electricity projections from National Grid ESO Future Energy Scenarios 2025
carbon_factors:
  current:
    gas: 0.183  # Updated from 0.210 - DESNZ 2024: 0.18296 kgCO₂e/kWh (gross CV basis)
    electricity: 0.233  # SAP 10.0 value (DESNZ 2024: 0.225 kgCO₂e/kWh)
  projected_2030:
    gas: 0.183  # Constant - combustion chemistry unchanged (no biogas blending assumed)
    electricity: 0.100  # Updated from 0.150 - National Grid FES 2025: 50-100 gCO₂/kWh range
  projected_2040:
    gas: 0.183  # Constant
    electricity: 0.050  # Near-zero grid - within NESO projection range (41-67 gCO₂/kWh)

# Heat Pump Parameters
heat_pump:
  scop: 3.0  # Seasonal Coefficient of Performance
  design_flow_temps: [35, 45, 55, 65]  # °C

# Heat Network Parameters
heat_network:
  # Current penetration assumption (share of homes connected)
  current_penetration: 0.002  # 0.2%
  # Penetration levels for sensitivity analysis
  penetration_sensitivity: [0.002, 0.005, 0.01, 0.02, 0.05, 0.10]  # 0.2% to 10%
  # Heat network tariff (£/kWh delivered heat)
  tariff_per_kwh: 0.08
  # Heat network efficiency (losses)
  distribution_efficiency: 0.90  # 10% distribution losses

# Financial Parameters
financial:
  discount_rate: 0.035  # 3.5% real discount rate (HM Treasury Green Book)
  analysis_horizon_years: 20  # Project lifetime for NPV calculations
  price_scenarios:
    baseline:
      name: "Current prices (Ofgem cap)"
      gas: 0.0624
      electricity: 0.245
      heat_network: 0.08
    low:
      name: "Low energy prices"
      gas: 0.05
      electricity: 0.20
      heat_network: 0.06
    high:
      name: "High energy prices"
      gas: 0.08
      electricity: 0.30
      heat_network: 0.10
    projected_2030:
      name: "2030 projections"
      gas: 0.07
      electricity: 0.22
      heat_network: 0.07

# Uncertainty Parameters
# Based on EPC measurement error and prebound effect research
uncertainty:
  # Demand uncertainty range (±% around nominal)
  demand_error_low: -0.20  # -20%
  demand_error_high: 0.20  # +20%
  # Higher uncertainty for flagged anomalies
  anomaly_demand_error_low: -0.30  # -30%
  anomaly_demand_error_high: 0.30  # +30%
  # SAP score uncertainty by band (from Crawley et al., 2019)
  sap_uncertainty:
    high_rating: 2.4   # SAP 85+
    good_rating: 4.0   # SAP 70-84
    average_rating: 6.0  # SAP 55-69
    low_rating: 8.0    # SAP <55

# EPC Anomaly Detection Thresholds
anomaly_detection:
  # Roof insulation threshold (mm) - below this is considered poorly insulated
  roof_insulation_threshold_mm: 100
  # Suspicious EPC bands for uninsulated properties
  suspicious_bands: ["C", "D"]
  # Wall conditions that trigger anomaly flag
  uninsulated_wall_conditions: ["none", "unknown"]

# Output Settings
output:
  report_format: "pdf"
  figure_dpi: 300
  map_format: "html"
  data_format: "csv"

# File Paths
paths:
  data_raw: "data/raw"
  data_processed: "data/processed"
  data_supplementary: "data/supplementary"
  outputs: "data/outputs"
  figures: "data/outputs/figures"
  reports: "data/outputs/reports"
  maps: "data/outputs/maps"
