# Heat Street EPC Analysis Dashboard

Comprehensive interactive dashboard addressing all 12 client requirements for the Heat Street project.

## ğŸ¯ Overview

This dashboard provides a complete analysis of 704,292 Edwardian terraced properties across London, covering:

- **Section 1:** Fabric Detail Granularity (wall types, insulation, roof, glazing, ventilation)
- **Section 2:** Retrofit Measures & Packages (15+ measures with costs and savings)
- **Section 3:** Radiator Upsizing (explicit measure enabling low-temp heat pumps)
- **Section 4:** Window Upgrades (double vs triple glazing comparison)
- **Section 5:** Payback Times (simple and discounted payback for all measures)
- **Section 6:** Pathways & Hybrid Scenarios (5 distinct pathways with full metrics)
- **Section 7:** EPC Data Robustness (anomaly detection and uncertainty quantification)
- **Section 8:** Fabric Tipping Point Curve (diminishing returns analysis)
- **Section 9:** Load Profiles & System Impacts (hourly profiles, peak loads)
- **Section 10:** Heat Network Penetration & Price Sensitivity (scenario modeling)
- **Section 11:** Tenure Filtering (owner-occupied, private rented, social)
- **Section 12:** Documentation & Tests (comprehensive docstrings and assertions)

## ğŸš€ Quick Start

1. **Generate dashboard data**

   ```bash
   python ../run_analysis.py
   # Produces data/outputs/dashboard/dashboard-data.json and copies it to dashboard/public/
   ```

2. **Run the React app**

   ```bash
   # Install dependencies
   npm install

   # Start development server (uses latest dashboard-data.json)
   npm run dev

   # Build for production
   npm run build
   ```

   > â„¹ï¸ **Note on build warnings:** Vite may print a message about some chunks being larger than 500 kB after minification. This is a warning onlyâ€”the build still succeeds. It appears because the bundled dashboard code and default data are large. If you want to remove the warning, you can either add manual code-splitting (e.g., lazy-load heavier tabs) or raise `build.chunkSizeWarningLimit` in `vite.config.js`.

## ğŸ“Š Dashboard Features

### Navigation

The dashboard is organized into 5 main sections accessible via tabs:

1. **Executive Summary** - High-level metrics and pathway comparison
2. **Fabric Analysis (Â§1,7,11)** - Wall types, insulation, anomalies, tenure breakdown
3. **Retrofit Measures (Â§2,3,4,5)** - Individual measures, packages, radiator upsizing, glazing, paybacks
4. **Pathways & Tipping Points (Â§6,8)** - 5 pathways comparison, hybrid costs, tipping point curves
5. **Load Profiles & Sensitivity (Â§9,10)** - Hourly demand, peak analysis, price sensitivity, uncertainty

### Interactive Charts

All charts are built with Recharts and include:
- Bar charts for distributions and comparisons
- Line charts for time series and profiles
- Pie charts for proportional data
- Area charts for cumulative analysis
- Scatter plots for cost-effectiveness
- Tornado charts for sensitivity analysis

### Data Visualization

- **704,292 properties** analyzed
- **15+ retrofit measures** catalogued
- **5 decarbonization pathways** compared
- **4 price scenarios** modeled
- **12 client requirements** fully addressed

## ğŸ“ Project Structure

```
dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ExecutiveSummary.jsx          # Overall metrics and key findings
â”‚   â”‚   â”œâ”€â”€ FabricAnalysis.jsx            # Wall types, insulation, anomalies, tenure
â”‚   â”‚   â”œâ”€â”€ RetrofitAnalysis.jsx          # Measures, packages, radiator, glazing, payback
â”‚   â”‚   â”œâ”€â”€ PathwaysAnalysis.jsx          # Pathways, hybrid costs, tipping points
â”‚   â”‚   â””â”€â”€ LoadProfilesAndSensitivity.jsx # Load profiles, sensitivity, uncertainty
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ mockData.js                   # Sample data matching analysis outputs
â”‚   â”œâ”€â”€ App.jsx                           # Main application with navigation
â”‚   â”œâ”€â”€ main.jsx                          # React entry point
â”‚   â””â”€â”€ index.css                         # Global styles
â”œâ”€â”€ public/                               # Static assets + dashboard-data.json
â”œâ”€â”€ dist/                                 # Built React app
â”œâ”€â”€ index.html                            # HTML template
â”œâ”€â”€ vite.config.js                        # Vite configuration
â”œâ”€â”€ package.json                          # Dependencies and scripts
â””â”€â”€ README.md                             # This file
```

## ğŸ”§ Technical Details

### Technologies Used

- **React 18** - UI framework
- **Recharts 2.10** - Charting library
- **Vite 5** - Build tool and dev server
- **Lucide React** - Icon library

### Data Sources

- Primary: `dashboard/public/dashboard-data.json` generated by `run_analysis.py` (also stored in `data/outputs/dashboard/`).
- Fallback: bundled defaults in `src/data/dashboardData.js` if the JSON is missing.

### Browser Compatibility

- âœ… Chrome/Edge 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… All modern browsers with ES6+ support

## ğŸ“ˆ Key Findings Highlighted

### Executive Summary
- Average SAP Score: 63.4
- Wall Insulation Rate: 33.7%
- Most Common EPC Band: D (52.5%)

### Retrofit Packages
- **Value Sweet Spot:** Â£3,700 capex, 61% of max savings
- **Diminishing Returns:** Clear tipping point after floor insulation
- **Radiator Upsizing:** Essential for heat pump operation (10Â°C flow temp reduction)

### Pathways Comparison
- **Fabric + HP:** Best COâ‚‚ reduction (4.93t/property)
- **Hybrid:** Realistic cost model (Â£28,407/property)
- **Fabric Only:** Shortest payback in fabric-only scenario

### Sensitivity Analysis
- **Gas/Electricity Prices:** Highest impact (Â£450/yr range)
- **Heat Pump COP:** Moderate impact (Â£250/yr range)
- **Fabric Costs:** Lowest impact (Â£75/yr range)

## ğŸ¨ Customization

### Styling

All styles are in `src/index.css`. The design uses:
- Gradient backgrounds for metric cards
- Clean, modern card-based layout
- Responsive grid system
- Color-coded badges for status indicators

### Adding New Sections

1. Create a new component in `src/components/`
2. Import it in `src/App.jsx`
3. Add a new tab entry in the `tabs` array
4. Component will automatically integrate into navigation

### Updating Data

Edit `src/data/mockData.js` to update any data values. The dashboard will automatically reflect changes on rebuild.

## ğŸ“‹ Client Requirements Checklist

All 12 sections fully implemented:

- âœ… **Section 1:** Fabric granularity with 6+ variables (wall, roof, floor, glazing, ventilation)
- âœ… **Section 2:** 15+ retrofit measures with costs, savings, COâ‚‚, payback
- âœ… **Section 3:** Radiator upsizing explicit and combined with fabric measures
- âœ… **Section 4:** Double vs triple glazing comparison with marginal analysis
- âœ… **Section 5:** Simple and discounted payback (3.5% HM Treasury rate)
- âœ… **Section 6:** 5 pathways (baseline, fabric, HP, HN, hybrid) with per-home metrics
- âœ… **Section 7:** EPC anomaly detection with Â±30% uncertainty for flagged properties
- âœ… **Section 8:** Fabric tipping point curve with marginal cost per kWh
- âœ… **Section 9:** Hourly load profiles with peak/average/ratio metrics
- âœ… **Section 10:** HN penetration (0.2%-10%) and 4 price scenarios
- âœ… **Section 11:** Tenure breakdown (owner-occupied, private rented, social)
- âœ… **Section 12:** Comprehensive documentation throughout codebase

## ğŸš€ Deployment

### Hosting the React App

1. Build the production version:
   ```bash
   npm run build
   ```

2. Deploy the `dist/` folder to any static hosting service:
   - Netlify: Drag and drop `dist/` folder
   - Vercel: Connect GitHub repo
   - GitHub Pages: Push `dist/` to `gh-pages` branch
   - AWS S3: Upload `dist/` contents to bucket

### Shipping the data-powered build

Include the `dashboard-data.json` generated by `run_analysis.py` alongside the `dist/` folder so recipients see the latest analysis results even without rerunning the pipeline.

## ğŸ” Feature Delivery Tracker

The enhancements below are now implemented and powered by the JSON output from `run_analysis.py`.

- [x] **Live data ingestion** â€“ Runtime fetch of `public/dashboard-data.json` with a fallback to bundled defaults for offline use.
- [x] **Export functionality (JSON, CSV, Excel, PDF)** â€“ `ExportMenu` uses FileSaver, ExcelJS, and html2canvas + jsPDF to export the current dataset in multiple formats.
- [x] **Data filtering and search** â€“ A global filter bar (search, borough, pathway) is backed by the shared dashboard context so every chart/table respects the active filters.
- [x] **User preferences and saved views** â€“ Theme and animation choices persist in `localStorage`; users can save and reload named views that capture filters and the active tab.
- [x] **Print-optimized layouts** â€“ `@media print` styles simplify the UI for A4 printing, and the header includes a one-click â€œPrint this viewâ€ action.
- [x] **Animation controls** â€“ Recharts animations are enabled by default but can be toggled off through preferences for reduced-motion users.
- [x] **Dark mode theme** â€“ CSS variables power a light/dark theme toggle, respecting system preference when set to â€œSystem.â€
- [x] **Scenario comparison mode** â€“ A comparison drawer lets users pin up to three scenarios for side-by-side cost/COâ‚‚ charts.
- [x] **Interactive map integration** â€“ The borough tab now includes a Leaflet map that joins `dashboard-data.json` metrics to geocoded borough points for quick spatial inspection.
- [x] **Drill-down overlays** â€“ Clicking scenario bars, borough rows, or map markers opens a detail modal showing the underlying record.

## ğŸ“ Support

For questions or issues:
1. Check CLIENT_QUESTIONS_VERIFICATION.md for requirements reference
2. Review data/outputs/viz-ready/README.md for data structure
3. Consult src/ component files for implementation details

## ğŸ“„ License

Part of the Heat Street EPC Analysis project.

---

**Generated:** 2025-12-08
**Version:** 1.0.0
**Status:** Production Ready âœ…
